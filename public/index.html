<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Nitrolite AI Verification Dashboard</title>
    <link rel="stylesheet" href="/assets/styles.css" />
  </head>
  <body>
    <header class="app-header">
      <div>
        <h1>Nitrolite AI Verification</h1>
        <p class="subtitle">Live channel telemetry and verification controls powered by Yellow ClearNode.</p>
      </div>
      <div class="status-indicator" id="ws-status" data-state="disconnected">WS: disconnected</div>
    </header>

    <main class="layout">
      <section class="panel">
        <h2>Start Verification</h2>
        <form id="verification-form" class="form-grid">
          <label>
            <span>Model ID</span>
            <input
              type="text"
              name="modelId"
              required
              placeholder="model-abc"
              value="clip-vit-base-32"
            />
          </label>
          <label>
            <span>Verifier ID</span>
            <input
              type="text"
              name="verifierId"
              required
              placeholder="verifier-123"
              value="yellow-clearnode-auditor"
            />
          </label>
          <label>
            <span>Input Hash</span>
            <input
              type="text"
              name="inputHash"
              required
              placeholder="0x..."
              value="0x6d44c1f4b902a0bc13a7492abfde3abdf375d2a5c5e5f4a5f0a19c3f93c7d4b2"
            />
          </label>
          <label>
            <span>Output Hash</span>
            <input
              type="text"
              name="outputHash"
              required
              placeholder="0x..."
              value="0x3117ab2f4b1f7c5bc107f6ea93c590f705c52db6bfa8f74d74b789b520ffe21d"
            />
          </label>
          <label>
            <span>Latency (ms)</span>
            <input
              type="number"
              name="latencyMs"
              min="0"
              step="1"
              required
              value="420"
            />
          </label>
          <label>
            <span>Metadata (JSON)</span>
            <textarea name="metadata" rows="3" placeholder='{"dataset":"imagenet"}'>{"dataset":"imagenet","modelVersion":"v2.1","notes":"demo submission"}</textarea>
          </label>
          <button type="submit" class="primary">Create Verification</button>
        </form>
        <p class="form-hint">Use the pre-filled sample values or customise them before submitting.</p>
        <div class="feedback" id="form-feedback"></div>
      </section>

      <section class="panel">
        <h2>Active Verifications</h2>
        <div id="verification-list" class="card-list" data-empty-message="No verifications created yet."></div>
      </section>

      <section class="panel">
        <h2>ClearNode Stream</h2>
        <div class="metrics">
          <div class="metric">
            <span class="metric-label">Channels tracked</span>
            <span class="metric-value" id="metric-channels">0</span>
          </div>
          <div class="metric">
            <span class="metric-label">Batch updates</span>
            <span class="metric-value" id="metric-batches">0</span>
          </div>
          <div class="metric">
            <span class="metric-label">Balance updates</span>
            <span class="metric-value" id="metric-balances">0</span>
          </div>
        </div>
        <div class="event-log" id="event-log"></div>
      </section>

      <section class="panel panel-telemetry">
        <h2>Telemetry &amp; Automation</h2>

        <div class="metric-cluster">
          <h3>Channel activity</h3>
          <div class="metrics metrics-compact">
            <div class="metric">
              <span class="metric-label">Total events</span>
              <span class="metric-value" id="telemetry-channel-total">0</span>
            </div>
            <div class="metric">
              <span class="metric-label">Active channels</span>
              <span class="metric-value" id="telemetry-channel-snapshot">0</span>
            </div>
            <div class="metric">
              <span class="metric-label">Last event</span>
              <span class="metric-value metric-value-sm" id="telemetry-channel-last">–</span>
            </div>
          </div>
        </div>

        <div class="metric-cluster">
          <h3>Verification lifecycle</h3>
          <div class="metrics metrics-compact">
            <div class="metric">
              <span class="metric-label">Active</span>
              <span class="metric-value" id="telemetry-verifications-active">0</span>
            </div>
            <div class="metric">
              <span class="metric-label">Resolved</span>
              <span class="metric-value" id="telemetry-verifications-resolved">0</span>
            </div>
            <div class="metric">
              <span class="metric-label">Verified ✓</span>
              <span class="metric-value" id="telemetry-verifications-verified">0</span>
            </div>
            <div class="metric">
              <span class="metric-label">Failed ✕</span>
              <span class="metric-value" id="telemetry-verifications-failed">0</span>
            </div>
          </div>
        </div>

        <div class="metric-cluster">
          <h3>Automation</h3>
          <div class="metrics metrics-compact">
            <div class="metric">
              <span class="metric-label">Triggered</span>
              <span class="metric-value" id="telemetry-automation-triggered">0</span>
            </div>
            <div class="metric">
              <span class="metric-label">Pending</span>
              <span class="metric-value" id="telemetry-automation-pending">0</span>
            </div>
            <div class="metric">
              <span class="metric-label">Completed</span>
              <span class="metric-value" id="telemetry-automation-completed">0</span>
            </div>
            <div class="metric">
              <span class="metric-label">Failed</span>
              <span class="metric-value" id="telemetry-automation-failed">0</span>
            </div>
            <div class="metric">
              <span class="metric-label">Avg processing</span>
              <span class="metric-value metric-value-sm" id="telemetry-automation-avg">–</span>
            </div>
          </div>
        </div>

        <footer class="telemetry-footer">
          <div>
            <span class="footer-label">Booted</span>
            <span id="telemetry-booted">–</span>
          </div>
          <div>
            <span class="footer-label">Last update</span>
            <span id="telemetry-generated">–</span>
          </div>
        </footer>
      </section>

      <section class="panel panel-timeline">
        <h2>Channel Timeline</h2>
        <div class="timeline-controls">
          <label class="timeline-select">
            <span>Channel</span>
            <select id="channel-timeline-select">
              <option value="">Select a channel</option>
            </select>
          </label>
          <button type="button" class="ghost" id="channel-timeline-refresh">Refresh</button>
        </div>
        <div class="timeline" id="channel-timeline" data-state="empty">
          <div class="timeline-message">Choose a channel to load its event history.</div>
        </div>
      </section>
    </main>

    <template id="verification-card-template">
      <article class="card" data-status="pending">
        <header class="card-header">
          <h3 class="card-title"></h3>
          <span class="status-chip"></span>
        </header>
        <dl class="card-details"></dl>
        <footer class="card-actions">
          <button data-action="resolve" data-status="verified" class="ghost">Mark Verified</button>
          <button data-action="resolve" data-status="failed" class="ghost danger">Mark Failed</button>
        </footer>
      </article>
    </template>

    <script src="/assets/app.js" type="module"></script>
  </body>
</html>
